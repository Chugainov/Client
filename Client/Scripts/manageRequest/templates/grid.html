<div ng-show="Role == 1" class="container-fluid">
    <div class="col-sm-offset-1 col-sm-8" ng-show="!done">
        <h1 class="opacity-header">Оформить заявку</h1>
        <form>
            <fieldset>

                <div class="form-group is-empty">
                    <label for="requestN.Sum" class="control-label">Желаемая сумма</label>
                    <input type="number" class="form-control input-sm" id="requestN.Sum" ng-model="requestN.Sum">
                    <span ng-show="errors['request.Sum']" class="material-input error">{{errors['request.Sum'][0]}}</span>
                </div>

                <div class="form-group is-empty">
                    <label for="requestN.MonthCount" class="control-label">Желаемый срок (в месяцах)</label>
                    <input type="number" class="form-control input-sm" id="requestN.MonthCount" ng-model="requestN.MonthCount">
                    <span ng-show="errors['request.MonthCount']" class="material-input error">{{errors['request.MonthCount'][0]}}</span>
                </div>

                <div class="form-group is-empty">
                    <label for="requestN.IncomeSum" class="control-label">Месячный доход</label>
                    <input type="number" class="form-control input-sm" id="requestN.IncomeSum" ng-model="requestN.IncomeSum">
                    <span ng-show="errors['request.IncomeSum']" class="material-input error">{{errors['request.IncomeSum'][0]}}</span>
                </div>

                <div class="form-group is-empty">
                    <label for="requestN.OtherCreditPayments" class="control-label">Выплаты по другим кредитам</label>
                    <input type="number" class="form-control input-sm" id="requestN.OtherCreditPayments" ng-model="requestN.OtherCreditPayments">
                    <span ng-show="errors['request.OtherCreditPayments']" class="material-input error">{{errors['request.OtherCreditPayments'][0]}}</span>
                </div>

                <div class="form-group is-empty">
                    <label for="requestN.UtilitiesPayments" class="control-label">Расходы на коммунальные услуги</label>
                    <input type="number" class="form-control input-sm" id="requestN.UtilitiesPayments" ng-model="requestN.UtilitiesPayments">
                    <span ng-show="errors['request.UtilitiesPayments']" class="material-input error">{{errors['request.UtilitiesPayments'][0]}}</span>
                </div>

                <div class="form-group is-empty">
                    <label for="requestN.OtherPayments" class="control-label">Прочие расходы</label>
                    <input type="number" class="form-control input-sm" id="requestN.OtherPayments" ng-model="requestN.OtherPayments">
                    <span ng-show="errors['request.OtherPayments']" class="material-input error">{{errors['request.OtherPayments'][0]}}</span>
                </div>

                <div class="form-group is-empty">
                    <label for="inputCredit" class="control-label">Выберите кредит</label>
                    <select class="form-control input-sm" id="inputCredit" ng-model="credit"
                            ng-options="c.Name for c in _credits"></select>
                    <span ng-show="credit.Name" class="material-input info-credit-block">
                        <span>Минимальный срок: {{credit.MinMonthPeriod}} мес.</span>
                        <span>Максимальный срок: {{credit.MaxMonthPeriod}} мес.</span>
                        <span>Минимальная сумма: {{credit.MinSum}} BYR</span>
                        <span>Максимальная сумма: {{credit.MaxSum}} BYR</span>
                    </span>
                    <span ng-show="errors['request.CreditId']" class="material-input error">{{errors['request.CreditId'][0]}}</span>
                </div>

                <div class="form-group is-empty">
                    <label for="requestN.Email" class="control-label">Адрес электронной почты</label>
                    <input type="email" class="form-control input-sm" id="requestN.Email" ng-model="requestN.Email">
                    <span ng-show="errors['request.Email']" class="material-input error">{{errors['request.Email'][0]}}</span>
                </div>

                <div class="form-group is-empty">
                    <label for="requestN.DocumentType" class="control-label">Тип документа</label>
                    <input type="text" class="form-control input-sm" id="requestN.DocumentType" value="Паспорт" disabled>
                    <span class="material-input"></span>
                </div>

                <div class="form-group is-empty">
                    <label for="customer.IdentificationNumber" class="control-label">Идентификационный номер</label>
                    <input type="text" class="form-control input-sm" id="customer.IdentificationNumber" ng-blur="Set()" ng-model="customer.IdentificationNumber">
                    <span ng-show="errors['request.Customer.IdentificationNumber']" class="material-input error">{{errors['request.Customer.IdentificationNumber'][0]}}</span>
                </div>

                <div class="form-group is-empty">
                    <label for="customer.DocumentNumber" class="control-label">Номер документа</label>
                    <input type="text" class="form-control input-sm" id="customer.DocumentNumber" ng-model="customer.DocumentNumber">
                    <span ng-show="errors['request.Customer.DocumentNumber']" class="material-input error">{{errors['request.Customer.DocumentNumber'][0]}}</span>
                </div>
                
                <div class="form-group is-empty">
                    <label for="customer.LastName" class="control-label">Фамилия</label>
                    <input type="text" class="form-control input-sm" id="customer.LastName" ng-model="customer.Lastname">
                    <span ng-show="errors['request.Customer.Lastname']" class="material-input error">{{errors['request.Customer.Lastname'][0]}}</span>
                </div>

                <div class="form-group is-empty">
                    <label for="customer.FirstName" class="control-label">Имя</label>
                    <input type="text" class="form-control input-sm" id="customer.FirstName" ng-model="customer.Firstname">
                    <span ng-show="errors['request.Customer.Firstname']" class="material-input error">{{errors['request.Customer.Firstname'][0]}}</span>
                </div>

                <div class="form-group is-empty">
                    <label for="customer.Patronymic" class="control-label">Отчество</label>
                    <input type="text" class="form-control input-sm" id="customer.Patronymic" ng-model="customer.Patronymic">
                </div>

                <div class="form-group is-empty date-input">
                    <label for="customer.DateOfBirth" class="control-label">Дата рождения</label>
                    <input type="text" uib-datepicker-popup="dd/MM/yyyy" ng-model="customer.DateOfBirth" is-open="opened"
                           ng-required="true" close-text="Close" class="form-control input-sm" id="customer.DateOfBirth" />
                    <span class="input-group-btn input-group-sm">
                        <button type="button" class="btn btn-default" ng-click="openCalendar($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                    </span>
                    <span ng-show="errors['request.Customer.DateOfBirth']" class="material-input error">{{errors['request.Customer.DateOfBirth'][0]}}</span>
                </div>

                <div class="form-group is-empty">
                    <label for="customer.Address.Country" class="control-label">Страна</label>
                    <input type="text" class="form-control input-sm" id="customer.Address.Country" ng-model="customer.Address.Country">
                    <span ng-show="errors['request.Customer.Address.Country']" class="material-input error">{{errors['request.Customer.Address.Country'][0]}}</span>
                </div>

                <div class="form-group is-empty">
                    <label for="customer.Address.City" class="control-label">Город</label>
                    <input type="text" class="form-control input-sm" id="customer.Address.City" ng-model="customer.Address.City">
                    <span ng-show="errors['request.Customer.Address.City']" class="material-input error">{{errors['request.Customer.Address.City'][0]}}</span>
                </div>

                <div class="form-group is-empty">
                    <label for="customer.Address.Street" class="control-label">Улица</label>
                    <input type="text" class="form-control input-sm" id="customer.Address.Street" ng-model="customer.Address.Street">
                    <span ng-show="errors['request.Customer.Address.Street']" class="material-input error">{{errors['request.Customer.Address.Street'][0]}}</span>
                </div>

                <div class="form-group is-empty">
                    <label for="customer.Address.House" class="control-label">Дом</label>
                    <input type="text" class="form-control input-sm" id="customer.Address.House" ng-model="customer.Address.House">
                    <span ng-show="errors['request.Customer.Address.House']" class="material-input error">{{errors['request.Customer.Address.House'][0]}}</span>
                </div>

                <div class="form-group is-empty">
                    <label for="customer.Address.Flat" class="control-label">Квартира</label>
                    <input type="text" class="form-control input-sm" id="customer.Address.Flat" ng-model="customer.Address.Flat">
                    <span ng-show="errors['request.Customer.Address.Flat']" class="material-input error">{{errors['request.Customer.Address.Flat'][0]}}</span>
                </div>

                <div class="form-group">
                    <label class="control-label" for="Military">Военный билет</label>
                    <input type="file" id="Military" onchange="angular.element(this).scope().loadMilitary(this)">
                    <input type="text" readonly class="form-control">
                </div>

                <div class="form-group">
                    <label class="control-label" for="Info">Справка о доходах</label>
                    <input type="file" id="Info" onchange="angular.element(this).scope().loadDocs(this)">
                    <input type="text" readonly class="form-control">
                    <span ng-show="errors['request.IncomeCertificate']" class="material-input error">{{errors['request.IncomeCertificate'][0]}}</span>
                </div>

                <div class="form-group is-empty">
                    <label for="requestN.CreditGoal" class="control-label">Цель кредита</label>
                    <textarea class="form-control input-sm" id="requestN.CreditGoal" ng-model="requestN.CreditGoal"></textarea>
                    <span ng-show="errors['request.CreditGoal']" class="material-input error">{{errors['request.CreditGoal'][0]}}</span>
                </div>

                <button type="button" class="btn btn-default" ng-show="Role == 1" ng-click="add()">Оформить заявку</button>

            </fieldset>
        </form>
    </div>
</div>
<div ng-show="Role == 1" class="container-fluid">
    <div class="col-sm-offset-1 col-sm-8" ng-show="done">
        <h1 class="opacity-header">Заявка оформлена</h1>
        <button type="button" class="btn btn-default" ng-click="addNew()">Оформить новую заявку</button>
        <a ng-href="{{contractUrl}}" class="btn btn-warning btn-fab btn-fab-mini" target="_blank">
            <i class="material-icons glyphicon glyphicon-cloud-download"></i>
        </a>
    </div>
</div>
<div ng-show="Role != 1" class="container-fluid">
    <a href="javascript:void(0)" class="btn btn-info btn-fab btn-add" ng-click="setStatus()" ng-show="Role != 1" title="{{status}}">
        <i class="material-icons glyphicon glyphicon-search"></i>
    </a>
    <div class="col-sm-offset-1 col-sm-10">
        <h1 class="opacity-header">Заявки на кредит</h1>
        <div class="table-responsive well">
            <table class="table table-striped table-hover custom-table">
                <thead>
                    <tr class="table-head">
                        <td>Имя клиента</td>
                        <td>Кредит</td>
                        <td>Запрашиваемая сумма</td>
                        <td>Срок</td>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="request in _gridOptions.CreditRequests.Items">
                        <td ng-click="open(request)">{{request.Customer.Firstname}}</td>
                        <td>{{request.Credit.Name}}</td>
                        <td>{{request.Sum + ' BYR'}}</td>
                        <td>{{request.MonthCount + ' мес.'}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <uib-pagination total-items="_gridOptions.TotalItemCount" ng-show="Role != 1"
                        ng-model="_currentPage" max-size="5"
                        class="pagination pagination-lg"
                        previous-text="«" next-text="»"
                        rotate="false" ng-change="pageChanged()"></uib-pagination>
    </div>
</div>
